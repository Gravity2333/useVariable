import*as e from"react";import*as t from"react-dom";var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};r.d(n,{A:()=>b});const c=(a={useMemo:()=>e.useMemo,useRef:()=>e.useRef,useState:()=>e.useState},s={},r.d(s,a),s),o="/";var a,s;const u=(e=>{var t={};return r.d(t,e),t})({flushSync:()=>t.flushSync});function l({config:e=[]}){const t=(0,c.useRef)(e.reduce(((e,t)=>({...e,[t.name]:void 0!==t.initialValue?t.initialValue:{}})),{})),[r]=function(){const[e,t]=(0,c.useState)(0);return[()=>{(0,u.flushSync)((()=>{t(e>99999?0:e=>e+1)}))}]}(),[n,a]=(0,c.useState)({});function s(e,t=!1){void 0!==n[e]&&a((r=>({...r,[e]:t})))}const l=(0,c.useMemo)((()=>{const t={},r=e.reduce(((e,r)=>(0!==Object.keys(r.effects||{})?.length&&Object.keys(r.effects||{}).forEach((e=>{t[`${r.name}${o}${e}`]=!1})),{...e,[r.name]:r})),{})||{};return a(t),r}),[]),f=(e,r,n,c)=>{const o=t.current[r];!function(){const t=[];let r=0;const a=(e,n)=>{const c=t[r];if(!c){const c={};throw t[r++]=c,e(n).then((e=>{c.status="fulfilled",c.value=e}),(e=>{c.status="rejected",c.error=e}))}if(r++,"fulfilled"===c.status)return c.value;if("rejected"===c.status)throw new Error(c.error)},u=()=>{try{(t=>{e({call:t,setLoading:s.bind(null,n)},{store:o,dispatch:i},c)})(a)}catch(e){return e instanceof Promise&&e.then((()=>{r=0,u()})),{}}};u()}()},i=({type:e,payload:n})=>{const[c,a]=e.split(o),s=l[c],{reducers:u={},effects:i={}}=s;i[a]?f(i[a],c,e,n):u[a]&&((e,n,c)=>{const o=e(t.current[n],{payload:c});Object.assign(t.current,o),r()})(u[a],c,n)};return[t.current,i,function(e){return n[e]}]}const f="VARIABLES";function i(e){return`${f}${o}${e}`}function d(e){return`set${t=e,t.charAt(0).toUpperCase()+t.slice(1)}`;var t}function y(e){const t={name:f,initialValue:{},reducers:{},effects:{}},{variables:r={},reducers:n={},effects:c={}}=e;return Object.keys(r).forEach((e=>{const n=r[e];Object.defineProperty(t.initialValue,e,{value:n,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t.reducers,d(e),{configurable:!0,enumerable:!0,writable:!0,value:(t,r)=>({...t,[e]:r.payload})})})),Object.keys(n).forEach((e=>{Object.defineProperty(t.reducers,e,{configurable:!0,enumerable:!0,writable:!0,value:n[e]})})),Object.keys(c).forEach((e=>{Object.defineProperty(t.effects,e,{configurable:!0,enumerable:!0,writable:!0,value:c[e]})})),t}function b(e){const[{[f]:t},r,n]=l({config:[y(e)]}),o=e=>{r({type:i(e.type),payload:e.payload})};return[(0,c.useMemo)((()=>new Proxy(t,{get:(e,t,r)=>Reflect.get(e,t,r),set(e,t,r,n){const c=Reflect.set(e,t,r,n);return o({type:d(t),payload:r}),c},deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)})),[]),o,e=>n(i(e))]}var p=n.A;export{p as default};