import*as e from"react";import*as t from"react-dom";var r={d:(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};r.d(n,{f:()=>a,A:()=>b});const c=(o={useMemo:()=>e.useMemo,useRef:()=>e.useRef,useState:()=>e.useState},s={},r.d(s,o),s),a="/";var o,s;const u=(e=>{var t={};return r.d(t,e),t})({flushSync:()=>t.flushSync});function f({config:e=[]}){const t=(0,c.useRef)(e.reduce(((e,t)=>({...e,[t.name]:void 0!==t.initialValue?t.initialValue:{}})),{})),[r]=function(){const[e,t]=(0,c.useState)(0);return[()=>{(0,u.flushSync)((()=>{t(e>99999?0:e=>e+1)}))}]}(),[n,o]=(0,c.useState)({});function s(e,t=!1){void 0!==n[e]&&o((r=>({...r,[e]:t})))}const f=(0,c.useMemo)((()=>{const t={},r=e.reduce(((e,r)=>(0!==Object.keys(r.effects||{})?.length&&Object.keys(r.effects||{}).forEach((e=>{t[`${r.name}${a}${e}`]=!1})),{...e,[r.name]:r})),{})||{};return o(t),r}),[]),l=(e,r,n,c)=>{const a=t.current[r];!function(){const t=[];let r=0;const o=(e,n)=>{const c=t[r];if(!c){const c={};throw t[r++]=c,e(n).then((e=>{c.status="fulfilled",c.value=e}),(e=>{c.status="rejected",c.error=e}))}if(r++,"fulfilled"===c.status)return c.value;if("rejected"===c.status)throw new Error(c.error)},u=()=>{try{(t=>{e({call:t,setLoading:s.bind(null,n)},{store:a,dispatch:i},c)})(o)}catch(e){return e instanceof Promise&&e.then((()=>{r=0,u()})),{}}};u()}()},i=({type:e,payload:n})=>{const[c,o]=e.split(a),s=f[c],{reducers:u={},effects:i={}}=s;i[o]?l(i[o],c,e,n):u[o]&&((e,n,c)=>{const a=e(t.current[n],{payload:c});Object.assign(t.current,a),r()})(u[o],c,n)};return[t.current,i,function(e){return n[e]}]}const l="VARIABLES";function i(e){return`${l}${a}${e}`}function d(e){return`set${t=e,t.charAt(0).toUpperCase()+t.slice(1)}`;var t}function y(e){const t={name:l,initialValue:{},reducers:{},effects:{}},{variables:r={},reducers:n={},effects:c={}}=e;return Object.keys(r).forEach((e=>{const n=r[e];Object.defineProperty(t.initialValue,e,{value:n,configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(t.reducers,d(e),{configurable:!0,enumerable:!0,writable:!0,value:(t,r)=>({...t,[e]:r.payload})})})),Object.keys(n).forEach((e=>{Object.defineProperty(t.reducers,e,{configurable:!0,enumerable:!0,writable:!0,value:n[e]})})),Object.keys(c).forEach((e=>{Object.defineProperty(t.effects,e,{configurable:!0,enumerable:!0,writable:!0,value:c[e]})})),t}function b(e){const[{[l]:t},r,n]=f({config:[y(e)]}),a=e=>{r({type:i(e.type),payload:e.payload})};return[(0,c.useMemo)((()=>new Proxy(t,{get:(e,t,r)=>Reflect.get(e,t,r),set(e,t,r,n){const c=Reflect.set(e,t,r,n);return a({type:d(t),payload:r}),c},deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)})),[]),a,e=>n(i(e))]}var p=n.f,m=n.A;export{p as USE_STORE_TYPE_SPLITER,m as default};